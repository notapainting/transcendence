# Elastic Stack Setup

This project configures a complete Elastic Stack setup, including Elasticsearch, Kibana, Filebeat, and Logstash. The setup is automated with Docker Compose and includes scripts for configuring Index Lifecycle Management (ILM), Data Views, Dashboards, and certificates for secure communication.

## Project Structure

The following files and services are included to assist in the setup and configuration of the Elastic Stack:

### 1. Setup
- *Purpose*: Sets up security certificates for Elasticsearch, Kibana, and Logstash.
- *Details*:
  - Creates a certificate authority (CA) and instance certificates.
  - Configures the `kibana_system` password.
  - Ensures the proper file permissions for certificates.

### 2. Elasticsearch
- *Purpose*: Starts the Elasticsearch service and configures SSL for secure communication.
- *Details*:
  - Uses certificates generated by the setup service to secure communication.
  - Exposes the Elasticsearch service on port 9200.

### 3. Kibana
- *Purpose*: Starts the Kibana service for interacting with Elasticsearch via the UI.
- *Details*:
  - Configured to use SSL for secure communication with Elasticsearch.
  - Exposes the Kibana UI on port 5601.

### 4. Logstash
- *Purpose*: Runs Logstash, processing logs and sending them to Elasticsearch.
- *Details*:
  - Receives logs from Filebeat and sends them to Elasticsearch.
  - Uses SSL for secure communication with Elasticsearch.

### 5. Logs Policy
- *Purpose*: Configures Index Lifecycle Management (ILM) policies in Elasticsearch.
- *Execution*: The policy container runs after Elasticsearch and Kibana are healthy.
- *Details*:
  - Applies ILM policies to manage the lifecycle of indices for Nginx and Filebeat logs.
  - Uses the ilm.json file to define the different phases (hot, warm, cold, delete).

### 6. Data views
- *Purpose*: Automates the creation of Data Views in Kibana.
- *Execution*: The data_views container runs after the ILM policies and Logstash are set up.
- *Details*:
  - Verifies the existence of filebeat and nginx data views in Kibana.
  - If missing, it creates them using the corresponding JSON files.

### 7. Dashboards
- *Purpose*: Automates the import of pre-configured dashboards in Kibana.
- *Execution*: The dashboards container runs after the data views are created.
- *Details*:
  - Imports a pre-configured dashboard into Kibana to visualize logs from Nginx and Filebeat.

### 8. Filebeat
- *Purpose*: Collects logs from Docker containers and forwards them to Logstash.
- *Details*:
  - Uses the filebeat.yml configuration to collect logs from Docker containers.
  - Sends the logs to Logstash for processing, and Logstash forwards them to Elasticsearch.